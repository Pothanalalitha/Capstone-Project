<div class="update-patient-container">
  <h2>Update Patient</h2>

  <form (ngSubmit)="updatePatient()" #patientForm="ngForm" novalidate>
    <div class="form-group">
      <label for="name">Name</label>
      <input
        id="name"
        name="name"
        [(ngModel)]="patient.name"
        required
        maxlength="100"
        #nameInput="ngModel"
      />
      <div *ngIf="nameInput.invalid && nameInput.touched" class="error">
        Name is required (max 100 characters).
      </div>
    </div>

    <div class="form-group">
      <label for="address">Address</label>
      <input
        id="address"
        name="address"
        [(ngModel)]="patient.address"
        required
        maxlength="255"
        #addressInput="ngModel"
      />
      <div *ngIf="addressInput.invalid && addressInput.touched" class="error">
        Address is required (max 255 characters).
      </div>
    </div>

    <div class="form-group">
      <label for="gender">Gender</label>
      <select
        id="gender"
        name="gender"
        [(ngModel)]="patient.gender"
        required
        #genderInput="ngModel"
      >
        <option value="" disabled>Select Gender</option>
        <option>Male</option>
        <option>Female</option>
        <option>Other</option>
      </select>
      <div *ngIf="genderInput.invalid && genderInput.touched" class="error">
        Gender is required (Male, Female, or Other).
      </div>
    </div>

    <div class="form-group">
      <label for="dob">Date of Birth</label>
      <input
        id="dob"
        name="dob"
        type="date"
        [(ngModel)]="patient.dob"
        required
        #dobInput="ngModel"
      />
      <div *ngIf="dobInput.invalid && dobInput.touched" class="error">
        Valid Date of Birth is required.
      </div>
    </div>

    <div class="form-group">
      <label for="weight">Weight (kg)</label>
      <input
        id="weight"
        name="weight"
        type="number"
        step="0.1"
        [(ngModel)]="patient.weight"
        required
        min="0.1"
        #weightInput="ngModel"
      />
      <div *ngIf="weightInput.invalid && weightInput.touched" class="error">
        Weight must be greater than 0.
      </div>
    </div>

    <div class="form-group">
      <label for="height">Height (cm)</label>
      <input
        id="height"
        name="height"
        type="number"
        step="0.1"
        [(ngModel)]="patient.height"
        required
        min="0.1"
        #heightInput="ngModel"
      />
      <div *ngIf="heightInput.invalid && heightInput.touched" class="error">
        Height must be greater than 0.
      </div>
    </div>

    <div *ngIf="errorMsg" class="error general-error">{{ errorMsg }}</div>

    <button type="submit" [disabled]="patientForm.invalid">Update Patient</button>
  </form>

  <div *ngIf="showSuccessPopup" class="popup-success">
    Patient updated successfully!
  </div>
</div>
