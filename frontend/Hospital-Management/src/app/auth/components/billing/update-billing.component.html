<div class="update-billing-container">
  <h2>Update Invoice</h2>

  <form (ngSubmit)="updateInvoice()" #invoiceForm="ngForm" novalidate>
    <div class="form-group">
      <label for="appointmentId">Appointment ID</label>
      <input
        id="appointmentId"
        name="appointmentId"
        type="number"
        [(ngModel)]="invoice.appointmentId"
        required
        #appointmentIdInput="ngModel"
      />
      <div *ngIf="appointmentIdInput.invalid && appointmentIdInput.touched" class="error">
        Appointment ID is required.
      </div>
    </div>

    <div class="form-group">
      <label for="patientId">Patient ID</label>
      <input
        id="patientId"
        name="patientId"
        type="number"
        [(ngModel)]="invoice.patientId"
        required
        #patientIdInput="ngModel"
      />
      <div *ngIf="patientIdInput.invalid && patientIdInput.touched" class="error">
        Patient ID is required.
      </div>
    </div>

    <div class="form-group">
      <label for="amount">Amount</label>
      <input
        id="amount"
        name="amount"
        type="number"
        [(ngModel)]="invoice.amount"
        required
        min="0"
        step="0.01"
        #amountInput="ngModel"
      />
      <div *ngIf="amountInput.invalid && amountInput.touched" class="error">
        Amount is required and must be positive.
      </div>
    </div>

    <div class="form-group">
      <label for="status">Status</label>
      <input
        id="status"
        name="status"
        type="text"
        [(ngModel)]="invoice.status"
        required
        #statusInput="ngModel"
      />
      <div *ngIf="statusInput.invalid && statusInput.touched" class="error">
        Status is required.
      </div>
    </div>

    <div *ngIf="errorMsg" class="error general-error">{{ errorMsg }}</div>

    <button type="submit" [disabled]="invoiceForm.invalid">Update Invoice</button>
  </form>

  <div *ngIf="showSuccessPopup" class="popup-success">
    Invoice updated successfully!
  </div>
</div>
